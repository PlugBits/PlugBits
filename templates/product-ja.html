<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8">
  <title>%%TITLE_JA%% | Kintone向けミニプラグイン</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta name="description" content="%%SUMMARY_JA%%">
  <link rel="stylesheet" href="../style.css">
</head>
<body class="kb-root">
  <!-- Topbar -->
  <div class="kb-container kb-topbar">
    <a class="kb-back" href="../index.html">← 商品一覧に戻る</a>
  </div>

  <!-- Hero -->
  <header class="kb-product-hero kb-product-hero--split">
    <div class="kb-hero-col">
      <h1>%%TITLE_JA%%</h1>
      <p class="kb-summary">%%SUMMARY_JA%%</p>
      <div class="kb-tags">%%TAGS_JA_HTML%%</div>
      <div class="kb-hero-side">
        <img class="kb-hero-image" src="../%%HERO_IMAGE%%" alt="%%TITLE_JA%%">
      </div>
      <div class="kb-price-box">
        <div id="product-price" class="kb-price"
             data-price-jpy="%%PRICE_JPY%%">¥%%PRICE_JPY%%</div>
        <a class="kb-buy-btn" href="%%PURCHASE_URL_JPY%%" data-url-jpy="%%PURCHASE_URL_JPY%%" target="_blank" rel="noopener">購入</a>
      </div>
    </div>
  </header>

  <!-- Info -->
  <section class="kb-section kb-container">
    <div class="kb-info-grid">
      <div><strong>対応画面</strong><p>%%SUPPORTED_SCREENS_JA%%</p></div>
      <div><strong>カテゴリ</strong><p>%%CATEGORY_JA%%</p></div>
      <div><strong>ファイルサイズ</strong><p>%%FILE_SIZE_JA%%</p></div>
      <div><strong>更新日</strong><p>%%UPDATED_AT_JA%%</p></div>
    </div>
  </section>

  <!-- Features -->
  <section class="kb-section kb-container">
    <h2 class="kb-section-title">機能</h2>
    <ul class="kb-feature-list">%%FEATURES_JA_HTML%%</ul>
  </section>

  <!-- Screenshots (video/image 共通フレーム) -->
  <section class="kb-section kb-container">
    <h2 class="kb-section-title">スクリーンショット</h2>
    <div class="kb-screenshots">%%SCREENSHOTS_JA_HTML%%</div>
  </section>

  <!-- Steps -->
  <section class="kb-section kb-container">
    <h2 class="kb-section-title">使い方</h2>
    <div class="kb-steps">%%STEPS_JA_HTML%%</div>
  </section>

  <!-- Limitations -->
  <section class="kb-section kb-container">
    <h2 class="kb-section-title">制限事項</h2>
    <ul class="kb-limitation-list">%%LIMITATIONS_JA_HTML%%</ul>
  </section>

  <!-- FAQ -->
  <section class="kb-section kb-container kb-faq-block">
    <h2 class="kb-section-title">よくある質問</h2>
    <div class="kb-faq">%%FAQ_JA_HTML%%</div>
  </section>

  <!-- Related -->
  <section class="kb-section kb-container">
    <h2 class="kb-section-title">関連商品</h2>
    <div class="kb-related-products">%%RELATED_JA_HTML%%</div>
  </section>

  <footer class="kb-footer kb-container">
    <nav class="kb-footer-links">
      <a href="mailto:%%SUPPORT_MAIL%%">不具合報告</a>
      <a href="../terms.html">利用規約</a>
    </nav>
    <small>%%SITE_COPYRIGHT%%</small>
  </footer>

  <!-- Lightbox (images) -->
  <div id="kb-lightbox"><div class="kb-lb-inner"><img alt=""><button class="kb-lb-close" aria-label="Close">×</button></div></div>

  <!-- Scripts: video play / lightbox -->
  <script>
  // click-to-play (video)
  document.addEventListener('click',e=>{
    const btn=e.target.closest('.kb-video-play'); if(!btn) return;
    const v=btn.closest('.kb-shot,.kb-video')?.querySelector('video.kb-video-el'); if(!v) return;
    btn.style.display='none';
    v.setAttribute('controls',''); v.setAttribute('playsinline',''); v.setAttribute('webkit-playsinline','');
    try{ v.play(); }catch{}
  });

  // lightbox (images)
  (()=>{const ov=document.getElementById('kb-lightbox');const imgEl=ov.querySelector('img');
    const close=()=>{ov.classList.remove('open');document.body.style.overflow='';imgEl.src='';};
    ov.addEventListener('click',e=>{if(e.target===ov)close();});
    ov.querySelector('.kb-lb-close').addEventListener('click',close);
    document.addEventListener('keydown',e=>{if(e.key==='Escape')close();});
    document.addEventListener('click',e=>{
      const img=e.target.closest('.kb-shot-media img'); if(!img) return;
      imgEl.src=img.getAttribute('data-full')||img.currentSrc||img.src;
      ov.classList.add('open'); document.body.style.overflow='hidden';
    });
  })();
  </script>
</body>
</html>
