{\rtf1\ansi\ansicpg932\cocoartf2867
\cocoatextscaling0\cocoaplatform0{\fonttbl\f0\fswiss\fcharset0 Helvetica;}
{\colortbl;\red255\green255\blue255;}
{\*\expandedcolortbl;;}
\margl1440\margr1440\vieww11520\viewh8400\viewkind0
\pard\tx566\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardirnatural\partightenfactor0

\f0\fs24 \cf0 # PlugBits Reports - Template Editor / Mapping UI \uc0\u36914 \u25431 \u12414 \u12392 \u12417 \u65288 \u12316 2025-12-20\u65289 \
\
## \uc0\u30446 \u30340 \
- \uc0\u24115 \u31080 \u12486 \u12531 \u12503 \u12524 \u32232 \u38598 UI\u65288 A4\u12461 \u12515 \u12531 \u12496 \u12473 \u65291 \u21491 \u12506 \u12452 \u12531 \u65289 \u12391 \u12289 \
  - \uc0\u36890 \u24120 \u12514 \u12540 \u12489 \u65288 = mapping\u12505 \u12540 \u12473 \u65289 \u12391 \u12300 \u12501 \u12451 \u12540 \u12523 \u12489 \u21106 \u24403 \u12301 \u12434 \u23436 \u25104 \u12373 \u12379 \u12427 \
  - \uc0\u12507 \u12496 \u12540 /\u12501 \u12457 \u12540 \u12459 \u12473 \u12391 \u12461 \u12515 \u12531 \u12496 \u12473 \u20596 \u12434 \u12495 \u12452 \u12521 \u12452 \u12488 \u12375 \u12390 \u35222 \u32218 \u35480 \u23566 \
  - \uc0\u19978 \u32026 \u32773 \u12514 \u12540 \u12489 \u65288 XY\u32232 \u38598 \u12539 \u35201 \u32032 \u36861 \u21152 \u65289 \u12399 \u24460 \u22238 \u12375 \
\
---\
\
## \uc0\u29694 \u29366 \u12398 UI\u27083 \u25104 \
- 1\uc0\u12506 \u12540 \u12472 \u27083 \u25104 \
  - \uc0\u24038 \u65306 A4\u12461 \u12515 \u12531 \u12496 \u12473 \u65288 TemplateCanvas\u65289 \
  - \uc0\u21491 \u65306 \u12506 \u12452 \u12531 \u65288 \u12479 \u12502 \u20999 \u26367 \u65289 \
    - \uc0\u12300 \u35201 \u32032 \u12301 (ElementInspector)\
    - \uc0\u12300 \u21106 \u24403 \u12301 (MappingPage)\
- \uc0\u12524 \u12452 \u12450 \u12454 \u12488 \u12392 \u21106 \u24403 \u12364 \u21029 \u12506 \u12540 \u12472 \u12391 \u12399 \u12394 \u12367 \u12289 \u21491 \u12506 \u12452 \u12531 \u20999 \u26367 \u12391 \u32113 \u21512 \u12377 \u12427 \u26041 \u37341 \u12391 \u30906 \u23450 \
\
---\
\
## \uc0\u23455 \u35013 \u28168 \u12415 \u65288 \u22823 \u26528 \u65289 \
### 1) Mapping UI\uc0\u12398 \u12522 \u12473 \u12488 \u21270 \
- slots\uc0\u65288 Header/Footer\u65289 \u12398 \u21106 \u24403 \u12434 \u12300 \u34892 \u65288 summary\u65289 \u8594 \u23637 \u38283 \u65288 detail\u65289 \u12301 \u12398 \u12522 \u12473 \u12488 UI\u12395 \u22793 \u26356 \
- \uc0\u35299 \u38500 \u12508 \u12479 \u12531 \u12289 \u24517 \u38920 \u12510 \u12540 \u12463 \u12289 \u26410 \u35373 \u23450 \u34920 \u31034 \u12394 \u12393 \u12434 \u25972 \u20633 \
- \uc0\u12486 \u12540 \u12502 \u12523 \u65288 \u26126 \u32048 \u65289 \u29992 UI\u12399 \u21029 \u26528 \u12391  ColumnEditor \u12434 \u29992 \u24847 \u65288 \u12486 \u12540 \u12502 \u12523 \u23554 \u29992 UI\u65289 \
\
### 2) \uc0\u12495 \u12452 \u12521 \u12452 \u12488 \u65288 \u12461 \u12515 \u12531 \u12496 \u12473 \u36899 \u21205 \u65289 \
- Mapping \uc0\u20596 \u12398  hover/focus \u12391  Canvas \u20596 \u12398 \u35442 \u24403 \u35201 \u32032 \u12434  highlight\
- \uc0\u12495 \u12452 \u12521 \u12452 \u12488 \u23550 \u35937 \u65288 MVP\u65289 \
  - recordField: element.dataSource.type === 'kintone' && fieldCode\uc0\u19968 \u33268 \
  - subtable: table\uc0\u35201 \u32032 \u12398  dataSource.fieldCode\u19968 \u33268 \
  - subtableField: MVP\uc0\u12391 \u12399 \u12300 \u21015 \u21336 \u20301 \u12301 \u12391 \u12399 \u12394 \u12367 \u12300 \u35442 \u24403 \u12469 \u12502 \u12486 \u12540 \u12502 \u12523 \u12398  table \u35201 \u32032 \u12301 \u12434 \u20809 \u12425 \u12379 \u12427 \
- \uc0\u23455 \u35013 \u12399  `TemplateEditorPage` \u12391  `highlightRef` \u12434  state \u12395 \u25345 \u12385 \u12289 `useMemo` \u12391  `highlightedElementIds` \u12434 \u35336 \u31639 \u12377 \u12427 \u26041 \u24335 \u12395 \u31227 \u34892 \u65288 \u36000 \u33655 \u36605 \u28187 \u65289 \
\
### 3) doc_title \uc0\u12398 \u30683 \u30462 \u35299 \u28040 \
- doc_title \uc0\u12434  label \u12391 \u12399 \u12394 \u12367  text \u35201 \u32032 \u12395 \u23492 \u12379 \u12427 \u65288 recordField/staticText \u12398 \u36969 \u29992 \u30683 \u30462 \u12434 \u35299 \u28040 \u65289 \
- `shared/template.ts` \uc0\u12398  `SAMPLE_TEMPLATE` \u12391  `id: 'title'` \u12434  label \u8594  text \u12395 \u22793 \u26356 \
  - `dataSource: \{ type: 'static', value: '\uc0\u24481 \u35211 \u31309 \u26360 ' \}`\
  - `slotId: 'doc_title'` \uc0\u12399 \u32173 \u25345 \
\
---\
\
## \uc0\u29694 \u22312 \u12398 \u21839 \u38988 \u65288 \u37325 \u35201 \u65289 \
### \uc0\u12300 \u21106 \u24403 \u12479 \u12502 \u12391 \u12479 \u12452 \u12488 \u12523 (doc_title)\u12434 \u22793 \u12360 \u12390 \u12418 \u21453 \u26144 \u12373 \u12428 \u12394 \u12356 \u12301 \
\uc0\u30151 \u29366 \u65306 \
- \uc0\u35201 \u32032 \u12479 \u12502 \u12391 \u25991 \u35328 \u12434 \u22793 \u12360 \u12427 \u12392 \u22793 \u12431 \u12427 \
- \uc0\u12383 \u12384 \u12375 \u21106 \u24403 \u12479 \u12502 \u65288 mapping\u65289 \u12391  doc_title \u12434 \u22793 \u26356 \u12375 \u12390 \u12418  Canvas / \u12503 \u12524 \u12499 \u12517 \u12540 \u12395 \u21453 \u26144 \u12373 \u12428 \u12394 \u12356 \
\
\uc0\u21407 \u22240 \u65288 \u12411 \u12412 \u30906 \u23450 \u65289 \u65306 \
- `TemplateEditorPage` \uc0\u12398  applyMapping effect \u12398 \u24046 \u20998 \u21028 \u23450 \u12364 \u12300 mapping/structureType \u12398 \u12415 \u12301 \u27604 \u36611 \u12395 \u12394 \u12387 \u12390 \u12356 \u12427 \
- `applyMappingToTemplate()` \uc0\u12399  mapping \u12434 \u21516 \u12376 \u12414 \u12414  elements \u12384 \u12369 \u26356 \u26032 \u12377 \u12427 \u12465 \u12540 \u12473 \u12364 \u22810 \u12356 \
- \uc0\u12381 \u12398 \u22580 \u21512 \u12289 beforeSig/afterSig \u12364 \u19968 \u33268 \u12375 \u12390  updateTemplate(synced) \u12364 \u36208 \u12425 \u12378 \u12289 elements\u21453 \u26144 \u12364 \u27490 \u12414 \u12427 \
\
\uc0\u35442 \u24403 \u31623 \u25152 \u65288 \u27010 \u24565 \u65289 \u65306 \
- `TemplateEditorPage.tsx` \uc0\u12398  `useEffect(() => \{ ... adapter.applyMappingToTemplate ... \})`\
- beforeSig/afterSig \uc0\u12398 \u27604 \u36611 \u23550 \u35937 \u12364 \u36605 \u37327 \u21270 \u12398 \u12383 \u12417  elements \u12434 \u22806 \u12375 \u12390 \u12356 \u12427 \u12398 \u12364 \u35023 \u30446 \
\
\uc0\u23550 \u24540 \u26041 \u37341 \u65306 \
- \uc0\u24046 \u20998 \u21028 \u23450 \u12395  **elements \u12398 \u36605 \u37327 \u12471 \u12464 \u12493 \u12481 \u12515 ** \u12434 \u20837 \u12428 \u12427 \u65288 JSON.stringify(elements)\u12399 \u37325 \u12356 \u12398 \u12391 \u24517 \u35201 \u37096 \u20998 \u12384 \u12369 \u65289 \
  - id/type/slotId/region/dataSource/text/table.columns \uc0\u31561 \u12398 \u32626 \u21517 \u12434 \u20316 \u12427 \
  - beforeSig/afterSig \uc0\u12395  `elementsSig` \u12434 \u21547 \u12417 \u12427 \
- \uc0\u12371 \u12428 \u12391  mapping \u12364 \u21516 \u19968 \u12391 \u12418  elements \u26356 \u26032 \u12364 \u30330 \u29983 \u12375 \u12383 \u12425  updateTemplate \u12364 \u36208 \u12427 \
\
---\
\
## \uc0\u12486 \u12540 \u12502 \u12523 UI\u38306 \u36899 \u12513 \u12514 \
- ColumnEditor \uc0\u12399 \u12300 2\u27573 UI\u12301 \u12391 \u21015 \u35373 \u23450 \u12434 \u32232 \u38598 \
- \uc0\u24133 \u12420 \u20837 \u21147 \u12398 \u35211 \u12360 \u26041 \u65288 \u12459 \u12540 \u12489 \u32972 \u26223 \u12392 \u20837 \u21147 \u32972 \u26223 \u12398 \u21516 \u33394 \u21839 \u38988 \u65289 \u12434 \u35519 \u25972 \u12375 \u12383 \
- \uc0\u12300 \u26528 \u32218 \u12398 \u12467 \u12531 \u12488 \u12521 \u12473 \u12488 \u12301 \u12300 \u20837 \u21147 \u12391 \u12365 \u12427 \u22580 \u25152 \u12364 \u20998 \u12363 \u12427 \u12301 \u21839 \u38988 \u12364 \u12354 \u12426 \u12289 \u32972 \u26223 \u33394 \u24046 \u12391 \u25913 \u21892 \
- table\uc0\u38917 \u30446 \u12384 \u12369 \u24133 \u12364 \u35440 \u12414 \u12426 \u12420 \u12377 \u12356 \u12398 \u12391 \u12289 \u12486 \u12540 \u12502 \u12523 \u23554 \u29992 \u12398 \u12524 \u12452 \u12450 \u12454 \u12488 \u65288 grid columns\u65289 \u12434 \u21029 \u36884 \u35519 \u25972 \u12364 \u24517 \u35201 \
\
---\
\
## \uc0\u36861 \u21152 \u12391 \u20986 \u12390 \u12356 \u12383 \u12456 \u12521 \u12540 \u12539 \u23550 \u24540 \
- TS: `Cannot find name 'useState'` \uc0\u8594  import\u28431 \u12428 \
- TS: parameter implicit any \uc0\u8594  \u26126 \u31034 \u22411 \u20184 \u12369 \
- TS: `handleNormalize` \uc0\u26410 \u23450 \u32681  \u8594  `handleNormalizeAll` \u12395 \u32113 \u19968 \
- TS: `onFocusFieldRef` / `onClearFocus` \uc0\u12364  ColumnEditor \u12394 \u12393 \u12391 \u26410 \u23450 \u32681 \u25201 \u12356  \u8594  props\u12395 \u36890 \u12377  or \u21628 \u12403 \u20986 \u12375 \u12434 \u25972 \u29702 \
\uc0\u65288 \u8251 \u29694 \u22312 \u12399  TemplateEditorPage \u8594  MappingPage \u12398  onFocus/onClear \u12395 \u19968 \u26412 \u21270 \u12377 \u12427 \u26041 \u21521 \u65289 \
\
---\
\
## \uc0\u26041 \u37341 \u65288 \u20778 \u20808 \u38918 \u20301 \u65289 \
- \uc0\u19978 \u32026 \u32773 \u12514 \u12540 \u12489 \u65288 \u35201 \u32032 \u36861 \u21152 \u12364 \u21106 \u24403 \u12408 \u20986 \u12394 \u12356 \u31561 \u65289 \u12399 \u24460 \u22238 \u12375 \u65288 A\u26696 \u12391 OK\u65289 \
- \uc0\u36890 \u24120 \u12514 \u12540 \u12489 \u65288 mapping\u65289 \u12434 \u23436 \u25104 \u12373 \u12379 \u12427 \
  - applyMapping \uc0\u12398 \u21453 \u26144 \u21839 \u38988 \u12434 \u30452 \u12377 \
  - \uc0\u12381 \u12398 \u19978 \u12391  UI/UX \u12434 \u27927 \u32244 \u65288 \u20837 \u21147 \u12398 \u35222 \u35469 \u24615 \u12289 \u12486 \u12540 \u12502 \u12523 UI\u12398 \u24133 \u35519 \u25972 \u12289 \u12495 \u12452 \u12521 \u12452 \u12488 \u12398 \u20307 \u39443 \u65289 \
\
---\
\
## \uc0\u27425 \u12395 \u12420 \u12427 \u12371 \u12392 \u65288 TODO\u65289 \
### P0\uc0\u65288 \u12496 \u12464 \u20462 \u27491 \u65289 \
- applyMapping effect \uc0\u12398 \u24046 \u20998 \u21028 \u23450 \u12395  `elementsSig` \u12434 \u36861 \u21152 \u12375 \u12390 \u12289 mapping\u22793 \u26356 \u8594 elements\u21453 \u26144 \u12364 \u24517 \u12378 \u36208 \u12427 \u12424 \u12358 \u12395 \u12377 \u12427 \
- \uc0\u12381 \u12398 \u24460 \u12289 doc_title \u12398  staticText \u26356 \u26032 \u12364  Canvas/Preview \u12395 \u21453 \u26144 \u12373 \u12428 \u12427 \u12363 \u30906 \u35469 \
\
### P1\uc0\u65288 UX\u65289 \
- Mapping\uc0\u12459 \u12540 \u12489 \u20869 \u12398 \u20837 \u21147 UI\u32113 \u19968 \u65288 select/input\u12398 \u32972 \u26223 \u12539 \u22659 \u30028 \u12539 \u20313 \u30333 \u65289 \
- \uc0\u12486 \u12540 \u12502 \u12523 \u35373 \u23450 \u12398 \u24133 \u35440 \u12414 \u12426 \u12434 \u35299 \u28040 \u65288 ColumnEditor\u12398 grid\u35211 \u30452 \u12375 \u65289 \
- hover\uc0\u26178 \u12398 \u12495 \u12452 \u12521 \u12452 \u12488 \u65288 \u24375 \u12373 /\u25345 \u32154 /\u35299 \u38500 \u65289 \u12398 \u26368 \u32066 \u35519 \u25972 \
\
### P2\uc0\u65288 \u25972 \u29702 \u65289 \
- FieldRef\uc0\u22411 \u12434  shared \u12395 \u23492 \u12379 \u12427 \u65288 MVP\u12391 \u12399 any\u28151 \u22312 \u12398 \u25972 \u29702 \u65289 \
- applyMappingToTemplate \uc0\u12398 \u26356 \u26032 \u31684 \u22258 \u12398 \u26126 \u30906 \u21270 \u65288 header/footer slots / table\u21516 \u26399 \u65289 \
\
---\
\
## \uc0\u20027 \u35201 \u12501 \u12449 \u12452 \u12523 \
- `src/pages/TemplateEditorPage.tsx`\
  - \uc0\u21491 \u12506 \u12452 \u12531 \u32113 \u21512 \u12289 \u12495 \u12452 \u12521 \u12452 \u12488  state\u12289 applyMapping effect\
- `src/components/TemplateCanvas.tsx`\
  - `highlightedElementIds` \uc0\u12391 \u12495 \u12452 \u12521 \u12452 \u12488 \u34920 \u31034 \
- `src/editor/Mapping/MappingPage.tsx`\
  - adapter\uc0\u36969 \u29992 \u12289 RegionMappingPanel\u25551 \u30011 \
- `src/editor/Mapping/components/RegionMappingPanel.tsx`\
  - slots\uc0\u12398 \u12522 \u12473 \u12488 UI\u12289 table\u12398 ColumnEditor\u20999 \u26367 \
- `src/editor/Mapping/components/ColumnEditor.tsx`\
  - \uc0\u12486 \u12540 \u12502 \u12523 \u21015 \u32232 \u38598 UI\u65288 2\u27573 \u65289 \
- `src/editor/Mapping/adapters/line_items_v1.ts`\
  - validate / applyMappingToTemplate\uc0\u65288 slots\u21453 \u26144  + table\u21516 \u26399 \u65289 \
- `shared/template.ts`\
  - TemplateElement\uc0\u23450 \u32681 \u12289 SAMPLE_TEMPLATE\u65288 title\u12434 text\u21270 \u65289 \
\
---\
}