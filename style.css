/* =========================================================
   Kintone-compatible Design System — CLEANED (drop-in)
   ※ 現状のレイアウト/デザインを維持したまま重複と競合を整理 
   ========================================================= */

/* ===== TOKENS ===== */
:root{
  --kb-bg:#f7f9fa;
  --kb-surface:#fff;
  --kb-text:#23272a;
  --kb-sub:#6b7280;
  --kb-line:#e6eef7;
  --kb-primary:#2f64e2;
  --kb-primary-600:#2b57c7;
  --kb-primary-700:#224bb1;
  --kb-ink:#0b1f33;
  --kb-radius:14px;
  --kb-gap:8px;
  --kb-gap-lg:16px;
}
.kb-root[data-kb-theme="soft-dark"]{
  --kb-bg:#2c2f33; --kb-surface:#30343a; --kb-text:#f5f6fa; --kb-sub:#c5c7ce;
  --kb-line:#3c4047; --kb-primary:#7289da; --kb-primary-600:#667bd0; --kb-primary-700:#4f63a8; --kb-ink:#0f1115;
}

/* ===== RESET & BASE ===== */
.kb-root{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Noto Sans JP",sans-serif;color:var(--kb-text);background:var(--kb-bg);line-height:1.6}
.kb-root*,.kb-root*::before,.kb-root*::after{box-sizing:border-box}
.kb-root h1,.kb-root h2,.kb-root h3,.kb-root h4,.kb-root h5,.kb-root h6,
.kb-root p,.kb-root ul,.kb-root ol{margin:0;padding:0}
.kb-root ul{list-style:none}
.kb-root a{color:var(--kb-primary);text-decoration:none}
.kb-root a:hover{text-decoration:underline}
.kb-root a:focus-visible{outline:2px solid var(--kb-primary-600);outline-offset:2px}

/* ===== LAYOUT ===== */
.kb-container{max-width:1080px;margin:0 auto;padding:24px}
.kb-section{padding:48px 0}
.kb-section-title{font-size:24px;margin:28px 0 14px;font-weight:800;text-align:left;color:var(--kb-text)}

/* ===== TOP BAR / SWITCHER ===== */
.kb-topbar{display:flex;align-items:center;justify-content:space-between;padding:16px 0}
.kb-brand{font-weight:800;letter-spacing:.2px}
.kb-language-switcher{display:flex;gap:8px;align-items:center}
.kb-lang{color:#2a4a86;border:1px solid #d7e3f3;padding:6px 10px;border-radius:10px;background:#fff}
.kb-lang:hover{background:#edf4ff}
.kb-currency-btn{border:1px solid #d7e3f3;background:#fff;padding:6px 10px;border-radius:10px;cursor:pointer;font-weight:600}
.kb-currency-btn.active{background:#ecf3ff;border-color:#bcd1ff}
.kb-back{color:#3a6fd8}
.kb-back:hover{text-decoration:underline}

/* ===== BUTTONS ===== */
.kb-btn{display:inline-flex;align-items:center;justify-content:center;font-size:12.5px;padding:8px 12px;border-radius:10px;font-weight:600;border:1px solid #d7e3f3;background:#fff;color:#2a4a86;cursor:pointer;transition:.16s}
.kb-btn:hover{background:#edf4ff;border-color:#c7daf9}
.kb-btn-primary{background:var(--kb-primary);color:#fff;border-color:var(--kb-primary)}
.kb-btn-primary:hover{background:var(--kb-primary-600);border-color:var(--kb-primary-600)}
.kb-buy-btn{display:inline-block;background:var(--kb-primary);color:#fff;padding:10px 18px;border-radius:10px;font-weight:700;border:1px solid var(--kb-primary-600);box-shadow:0 4px 12px rgba(47,100,226,.25)}
.kb-buy-btn:hover{background:var(--kb-primary-600);border-color:var(--kb-primary-700)}

/* ===== HERO (INDEX) ===== */
.kb-hero{
  background:
    radial-gradient(1200px 440px at 15% -20%,rgba(55,125,255,.12),transparent),
    linear-gradient(180deg,rgba(0,0,0,.02),transparent);
}
.kb-hero .kb-container{padding:72px 0 60px}
.kb-hero-title{font-size:40px;line-height:1.2;margin:0 0 12px;font-weight:800}
.kb-hero-sub{color:#5b6b7a;margin:0 0 18px}
.kb-cta-primary,
.kb-cta-primary:visited{display:inline-flex;align-items:center;justify-content:center;min-height:46px;min-width:180px;padding:12px 24px;border-radius:12px;background:var(--kb-primary);color:#fff;box-shadow:0 6px 18px rgba(47,100,226,.25);font-weight:800}
.kb-cta-primary:hover{filter:brightness(1.08);box-shadow:0 8px 22px rgba(47,100,226,.35)}

/* ===== PRODUCT GRID (INDEX) ===== */
#kb-product-grid{display:grid;gap:28px;grid-template-columns:repeat(auto-fit,minmax(260px,1fr))}
.kb-card{display:grid;grid-template-rows:170px auto;background:#fff;border:1px solid var(--kb-line);border-radius:16px;overflow:hidden;text-decoration:none;color:inherit;box-shadow:0 1px 2px rgba(16,24,40,.04);transition:transform .18s,box-shadow .18s,border-color .18s}
.kb-card:hover{transform:translateY(-3px);box-shadow:0 10px 26px rgba(16,24,40,.10);border-color:#d6e3f7}
.kb-card-img,.kb-card-media{background:linear-gradient(180deg,#f6f9ff,#eff4fb);display:flex;align-items:center;justify-content:center}
.kb-card-img .kb-hero-image,.kb-card-media .kb-hero-image{width:80%;height:80%;object-fit:contain;filter:drop-shadow(0 6px 12px rgba(0,0,0,.06))}
.kb-card-body{padding:14px 16px 16px;display:flex;flex-direction:column;gap:8px}
.kb-card-title{font-size:15.5px;line-height:1.4;font-weight:700;letter-spacing:.1px}
.kb-card-sub{font-size:12.5px;color:#5b6b7a}
.kb-badges{display:flex;gap:6px;flex-wrap:wrap}
.kb-badge{font-size:11.5px;padding:3px 8px;border-radius:999px;background:#eef4ff;color:#325bcb;border:1px solid #d9e6ff}
.kb-card-foot{margin-top:6px;display:flex;align-items:center;justify-content:space-between}
.kb-price-badge,.kb-price{font-weight:800;letter-spacing:.2px;background:var(--kb-primary);color:#fff;padding:6px 10px;border-radius:10px;border:1px solid var(--kb-primary-600);box-shadow:0 4px 12px rgba(47,100,226,.20)}

/* ===== PRODUCT DETAIL (1-column center, image above price) ===== */
.kb-product-hero--split{display:flex;flex-direction:column;align-items:center;text-align:center;max-width:760px;margin:0 auto;padding:28px 16px 22px;gap:18px}
.kb-hero-col{width:100%}
.kb-hero-col h1{font-size:28px;font-weight:800;margin-bottom:8px}
.kb-hero-col .kb-summary{margin-bottom:12px;color:#555}
.kb-hero-col .kb-tags{margin:8px 0}
.kb-hero-side{margin:16px 0;display:flex;justify-content:center;width:100%}
.kb-hero-side .kb-hero-image{max-width:420px;width:100%;border:1px solid #e9eff7;border-radius:14px;padding:12px;background:#fbfcff}
.kb-price-box{display:flex;justify-content:center;align-items:center;gap:12px;margin-top:8px}
#product-price{color:#0b1f33;font-weight:800;font-size:18px}

/* Tags (product hero) */
.kb-hero-col .kb-tags{
  display:flex;
  gap:6px;
  flex-wrap:wrap;
  justify-content:center; /* 左寄せにしたければ消す */
  margin:8px 0;
}
.kb-tag{
  font-size:12px;
  line-height:1;
  padding:5px 10px;
  border-radius:9999px;
  background:#eef4ff;
  color:#325bcb;
  border:1px solid #d9e6ff;
  white-space:nowrap;
}


/* Info / Features / Limitations */
.kb-info-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:16px;margin-top:32px}
.kb-info-grid strong{font-weight:700}
.kb-info-grid p{color:#5b6b7a;margin:4px 0 0}
.kb-feature-list,.kb-limitation-list{max-width:600px;margin:32px auto 0}
.kb-feature-list li,.kb-limitation-list li{padding:16px;margin-bottom:10px;background:#fff;border:1px solid var(--kb-line);border-radius:10px;font-size:14px;line-height:1.5}
.kb-feature-list li::before{content:"✓ ";color:var(--kb-primary);font-weight:700}
.kb-limitation-list li::before{content:"⚠ ";color:#e74c3c;font-weight:700}

/* Screenshots */
.kb-screenshots{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:16px;margin-top:32px}
.kb-screenshots img{width:100%;height:auto;border:1px solid var(--kb-line);border-radius:14px}

/* FAQ */
.kb-faq{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:16px;max-width:1080px;margin:0 auto}
.kb-faq .kb-faq-item{background:#fff;border:1px solid var(--kb-line);border-radius:14px;padding:16px 18px;text-align:left;box-shadow:0 1px 2px rgba(16,24,40,.04)}
.kb-faq .kb-faq-item h3{margin:0 0 6px;font-size:15px}
.kb-faq .kb-faq-item p{margin:0;color:#5b6b7a}

/* Related products */
.kb-related-products{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:16px;margin-top:32px}
.kb-related-card{display:block;background:#fff;border:1px solid #e8edf3;border-radius:16px;overflow:hidden;text-decoration:none;box-shadow:0 1px 2px rgba(16,24,40,.04);transition:transform .18s,box-shadow .18s,border-color .18s}
.kb-related-card:hover{transform:translateY(-2px);box-shadow:0 8px 24px rgba(16,24,40,.08);border-color:#d7e3f3}
.kb-related-card .kb-hero-image{width:100%;height:160px;object-fit:contain;background:#f6f9fc}
.kb-related-title{font-weight:600;color:#0b1f33;padding:12px 14px 4px;line-height:1.3}
.kb-related-price{padding:10px 14px 14px;font-weight:700;color:#0b1f33}

/* Footer */
.kb-footer{margin-top:28px;padding:16px 0;border-top:1px solid #eef2f7;color:#5b6b7a}
.kb-footer-links{display:flex;gap:12px;margin-bottom:8px}

/* ===== RESPONSIVE ===== */
@media (max-width:840px){ .kb-hero-title{font-size:32px} }
@media (max-width:768px){
  .kb-container{padding:16px}
  .kb-hero-title{font-size:28px}
  .kb-hero-sub{font-size:16px}
  .kb-section-title{font-size:22px}
}

/* === Safe overrides: center hero & 4-col grid === */

/* 1) ヒーロー（見出し/サブ/ボタンを中央寄せ） */
.kb-hero { text-align: center; }
.kb-hero .kb-container { display: flex; flex-direction: column; align-items: center; }
.kb-hero-title, .kb-hero-subtitle { margin-left: auto; margin-right: auto; }
/* ボタンが左に流れないよう保証 */
.kb-cta-primary { display: inline-flex; align-items: center; justify-content: center; }

/* 2) 商品カード：4カラムグリッド（レスポンシブ） */
.kb-card-grid {
  display: grid !important;
  grid-template-columns: repeat(4, 1fr) !important;
  gap: 20px !important;
}
/* 幅縮小時は 3→2→1 列 */
@media (max-width: 1100px) { .kb-card-grid { grid-template-columns: repeat(3, 1fr) !important; } }
@media (max-width: 840px)  { .kb-card-grid { grid-template-columns: repeat(2, 1fr) !important; } }
@media (max-width: 560px)  { .kb-card-grid { grid-template-columns: 1fr !important; } }

/* 3) カードが“全幅化”するのを防止（万一の幅指定に負けないように） */
.kb-card-grid > .kb-card { width: 100%; max-width: none; }

/* 商品一覧とFAQの間に余白を追加 */
.kb-card-grid {
  margin-bottom: 48px; /* ← 下に余白を追加 */
}

/* FAQブロック上にも余白を確保 */
.kb-faq-block {
  margin-top: 64px;   /* FAQの始まりを下げる */
}
/* ==== Purchase button: text always visible & bold ==== */
.kb-price-box .kb-buy-btn,
.kb-price-box .kb-buy-btn:visited {
  color:#fff !important;
  font-weight:800;
  letter-spacing:.2px;
}
.kb-price-box .kb-buy-btn{
  background: var(--kb-primary);
  border:1px solid var(--kb-primary-600);
  box-shadow:0 4px 12px rgba(47,100,226,.25);
  padding:10px 18px;
  min-width:120px;
}
.kb-price-box .kb-buy-btn:hover{
  background: var(--kb-primary-600);
  border-color: var(--kb-primary-700);
  filter:brightness(1.02);
}

/* ==== Steps (使い方): 3-column with big numbered pills ==== */
/* 既存の .kb-steps / .kb-step / .kb-step-number / h3 / p をそのまま利用 */
.kb-steps{
  display:grid;
  grid-template-columns: repeat(3, 1fr);
  gap:24px;
  margin-top:32px;
  text-align:center;
  align-items:start;
}
.kb-step-number{
  width:56px; height:56px; border-radius:9999px;
  background: var(--kb-primary);
  color:#fff; font-weight:800; font-size:20px;
  display:flex; align-items:center; justify-content:center;
  margin:0 auto 12px;
  box-shadow:0 6px 18px rgba(47,100,226,.25);
}
.kb-step h3{
  font-size:16px; font-weight:700; margin:0 0 6px;
}
.kb-step p{
  font-size:14px; color:var(--kb-sub); margin:0;
}

/* モバイルで1カラムに */
@media (max-width: 900px){
  .kb-steps{ grid-template-columns: 1fr; row-gap:16px; }
}

/* ==== カード群とFAQの間隔を少し広げる ==== */
.kb-faq-block{ margin-top:40px; }

/* Video tile (screenshots グリッドに溶け込む) */
.kb-video {
  position: relative;
  border: 1px solid var(--kb-line);
  border-radius: 14px;
  overflow: hidden;
  background: #000;
}
.kb-video video { display:block; width:100%; height:auto; }
.kb-video-play {
  position: absolute; inset: 0; margin: auto;
  width: 64px; height: 64px; border: 0; border-radius: 999px;
  background: transparent; cursor: pointer; display: grid; place-items: center;
  transition: transform .12s ease, filter .12s ease;
}
.kb-video-play:hover { transform: scale(1.05); filter: brightness(1.05); }
.kb-video-caption {
  font-size: 12.5px; color: var(--kb-sub);
  padding: 6px 8px 10px; background: #fff;
}
/* --- Fix: video overlay clickability --- */
.kb-video { 
  position: relative; 
  isolation: isolate;         /* ← スタッキングコンテキストを作る */
}

.kb-video video,
.kb-video .kb-video-el {
  position: relative; 
  z-index: 1;                 /* ← 動画は下層 */
  display: block; 
  width: 100%; 
  height: auto; 
}

.kb-video-play {
  position: absolute; 
  inset: 0;
  display: grid; 
  place-items: center;
  background: transparent; 
  border: 0; 
  cursor: pointer;
  z-index: 3;                 /* ← ボタンを最前面へ */
}

.kb-video-play svg { 
  pointer-events: none;       /* ← SVGがクリックをブロックしないように */
}

/* --- Screenshots: equal height + captions for image & video --- */
.kb-screenshots {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(420px, 1fr));
  gap: 16px;
  margin-top: 32px;
}

/* 共通フレーム */
.kb-shot {
  border: 1px solid var(--kb-line);
  border-radius: 14px;
  overflow: hidden;
  background: #fff;
}

/* メディア枠は同じ比率に固定（16:9）*/
.kb-shot-media {
  position: relative;
  aspect-ratio: 16 / 9;
  background: #000;            /* 余白が出る動画・画像の下地 */
  isolation: isolate;
}

.kb-shot-media img,
.kb-shot-media video,
.kb-video-el {
  display: block;
  width: 100%;
  height: 100%;
  object-fit: contain;         /* はみ出さず全体を見せる */
  position: relative;
  z-index: 1;
}

/* 再生ボタンは最前面でクリック可能に */
.kb-video-play {
  position: absolute;
  inset: 0;
  margin: auto;
  width: 64px;
  height: 64px;
  border: 0;
  border-radius: 999px;
  background: transparent;
  cursor: pointer;
  display: grid;
  place-items: center;
  z-index: 3;
}
.kb-video-play svg { pointer-events: none; }

/* キャプション（画像・動画共通） */
.kb-shot figcaption,
.kb-video-caption {
  font-size: 12.5px;
  color: var(--kb-sub);
  padding: 8px 10px 12px;
  background: #fff;
}

